import{_ as B,a as R,b as L,c as H}from"./health-GAfT4A4A.js";import{u as x}from"./applyVendor-N7zd6jMs.js";import{r as O}from"./login-BebRebfa.js";import{C as T}from"./CommonHeader-D5wAUnYL.js";import{r as n,c as E,a,b as d,w as i,d as v,u as I,e as S,i as g,s}from"./index-DohTaPA9.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C8QZ-v7H.js";const j={class:"applyVendor"},z={class:"header-fixed"},A={class:"content"},G={class:"form-card"},J={class:"form-scroll-container"},K={class:"upload-section"},M={class:"id-card-upload"},Q={class:"id-card-upload",style:{"margin-top":"0.5rem"}},W={class:"upload-section"},Y={class:"id-card-upload"},Z={class:"submit-btn"},ee={__name:"index",setup(ae){const k=I(),o=n({phone:"",isVeteran:"否",isDisabled:"否"}),f=n(""),c=n([]),V=n([]),b=n([]),C=[{text:"是",value:"是"},{text:"否",value:"否"}],U=[{text:"是",value:"是"},{text:"否",value:"否"}],y=u=>{o.value.isVeteran=u.selectedValues[0],m.value=!1},D=u=>{o.value.isDisabled=u.selectedValues[0],p.value=!1},m=n(!1),p=n(!1),h=async()=>{if(!o.value.userName){s("请填写姓名");return}if(!o.value.phone){s("请填写手机号");return}if(!o.value.idNumber){s("请填写身份证号码");return}if(!o.value.password){s("请填写密码");return}if(!f.value){s("请确认密码");return}if(f.value!==o.value.password){s("两次输入的密码不一致");return}if(!o.value.idCardFront){s("请上传身份证正面照片");return}if(!o.value.idCardBack){s("请上传身份证反面照片");return}if(!o.value.healthProve){s("请上传健康证照片");return}try{const u=await O(o.value);u.code===200?(s("注册成功"),k.back()):s(u.message||"注册失败")}catch{s("注册失败，请重试")}},q=(u,e)=>{const r=new FormData;r.append("file",u.file),x(r).then(t=>{t.code===200?o.value.idCardFront=t.data.filePath:(c.value=[],s(t.message||"上传失败"))}).catch(t=>{c.value=[],s("上传失败")})},N=(u,e)=>{const r=new FormData;r.append("file",u.file),x(r).then(t=>{t.code===200?o.value.idCardBack=t.data.filePath:(V.value=[],s(t.message||"上传失败"))}).catch(t=>{V.value=[],s("上传失败")})},P=(u,e)=>{const r=new FormData;r.append("file",u.file),x(r).then(t=>{t.code===200?o.value.healthProve=t.data.filePath:(b.value=[],s(t.message||"上传失败"))}).catch(t=>{b.value=[],s("上传失败")})};return(u,e)=>{const r=v("van-field"),t=v("van-uploader"),w=v("van-picker"),_=v("van-popup"),F=v("van-button"),$=v("van-form");return S(),E("div",j,[a("div",z,[d(T,{title:"申请摊主"})]),a("div",A,[a("div",G,[a("div",J,[d($,{"input-align":"right",class:"form-container"},{default:i(()=>[d(r,{modelValue:o.value.userName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.userName=l),required:"",label:"姓名",placeholder:"请填写"},null,8,["modelValue"]),d(r,{modelValue:o.value.phone,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.phone=l),required:"",label:"手机号",placeholder:"请填写",rules:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}]},null,8,["modelValue"]),d(r,{modelValue:o.value.idNumber,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.idNumber=l),required:"",label:"身份证号码",placeholder:"请填写",rules:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号"}]},null,8,["modelValue"]),d(r,{modelValue:o.value.password,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.password=l),required:"",label:"密码",type:"password",placeholder:"请填写",rules:[{required:!0,message:"请输入密码"}]},null,8,["modelValue"]),d(r,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l),required:"",label:"确认密码",type:"password",placeholder:"请再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:l=>l===o.value.value.password,message:"两次输入的密码不一致"}]},null,8,["modelValue","rules"]),a("div",K,[e[18]||(e[18]=a("div",{class:"upload-title"},[a("div",{class:"section-title required"},"上传身份证正反面"),a("div",{class:"upload-tip"},[a("img",{src:B,alt:""}),g(" 身份证照片仅用于实名认证 ")])],-1)),a("div",M,[d(t,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=l=>c.value=l),"max-count":1,"after-read":q},{default:i(()=>e[16]||(e[16]=[a("div",{class:"upload-box"},[a("img",{src:R,alt:""}),a("div",{class:"upload-text-box"},[a("div",{class:"upload-text"},"头像面"),a("div",{class:"upload-desc"},"上传您的身份证头像面")])],-1)])),_:1},8,["modelValue"])]),a("div",Q,[d(t,{modelValue:V.value,"onUpdate:modelValue":e[6]||(e[6]=l=>V.value=l),"max-count":1,"after-read":N},{default:i(()=>e[17]||(e[17]=[a("div",{class:"upload-box"},[a("img",{src:L,alt:""}),a("div",{class:"upload-text-box"},[a("div",{class:"upload-text"},"国徽面"),a("div",{class:"upload-desc"},"上传您的身份证国徽面")])],-1)])),_:1},8,["modelValue"])])]),a("div",W,[e[20]||(e[20]=a("div",{class:"upload-title"},[a("div",{class:"section-title required"},"健康证")],-1)),a("div",Y,[d(t,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=l=>b.value=l),"max-count":1,"after-read":P},{default:i(()=>e[19]||(e[19]=[a("div",{class:"upload-box"},[a("img",{src:H,alt:""}),a("div",{class:"upload-text-box"},[a("div",{class:"upload-text"},"健康证"),a("div",{class:"upload-desc"},"上传您的健康证照片")])],-1)])),_:1},8,["modelValue"])])]),d(r,{modelValue:o.value.isVeteran,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.isVeteran=l),label:"是否退伍军人","label-width":100,readonly:"",clickable:"",onClick:e[9]||(e[9]=l=>m.value=!0),"right-icon":"arrow"},null,8,["modelValue"]),d(_,{show:m.value,"onUpdate:show":e[11]||(e[11]=l=>m.value=l),position:"bottom"},{default:i(()=>[d(w,{columns:C,onConfirm:y,onCancel:e[10]||(e[10]=l=>m.value=!1)})]),_:1},8,["show"]),d(r,{modelValue:o.value.isDisabled,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.isDisabled=l),label:"是否残疾人",readonly:"",clickable:"",onClick:e[13]||(e[13]=l=>p.value=!0),"right-icon":"arrow"},null,8,["modelValue"]),d(_,{show:p.value,"onUpdate:show":e[15]||(e[15]=l=>p.value=l),position:"bottom"},{default:i(()=>[d(w,{columns:U,onConfirm:D,onCancel:e[14]||(e[14]=l=>p.value=!1)})]),_:1},8,["show"]),a("div",Z,[d(F,{block:"",type:"primary",onClick:h},{default:i(()=>e[21]||(e[21]=[g(" 申请摊主 ")])),_:1})])]),_:1})])])])])}}},ne=X(ee,[["__scopeId","data-v-8f9fa7f3"]]);export{ne as default};
