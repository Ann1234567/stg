import{g as N,_ as I,a as R}from"./merchantPortal-QapevtUA.js";import{_ as T}from"./ts-DDz2SI98.js";import{C as U}from"./CommonHeader-D5wAUnYL.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as z,c as o,a as t,b as f,w as k,d as p,e as a,F as L,f as w,l,t as c,g as D,m as E}from"./index-DohTaPA9.js";import"./request-C8QZ-v7H.js";const H={class:"history"},M={class:"header-fixed"},S={class:"content"},$={class:"form-card"},j={class:"history-list"},A={key:0,class:"title-img"},G={key:1,class:"title-img"},J={key:2,class:"title-img"},K={class:"item-header"},O={key:0,class:"his-title"},Q={key:1,class:"his-title"},W={key:2,class:"his-title"},X={class:"his-title"},Y={class:"item-content"},Z={key:3,class:"item-images"},ee={__name:"todoList",setup(se){const r=i([]),d=i(!1),_=i(!1),n=i(!1),g=i(!0),v=i({size:10,current:1}),m=()=>{d.value=!0,N(v.value).then(u=>{const{records:s,total:h}=u.data;n.value?(r.value=s,n.value=!1):r.value.push(...s),_.value=r.value.length>=h}).catch(()=>{showToast("加载失败")}).finally(()=>{d.value=!1})};z(()=>{m()});const C=()=>{n.value=!0,v.value.current=1,_.value=!1,r.value=[],m()},V=()=>{if(!n.value){if(g.value){g.value=!1,d.value=!1;return}v.value.current+=1,m()}},x=(u,s=0)=>{E({images:u,startPosition:s,closeable:!0})};return(u,s)=>{const h=p("van-image"),b=p("van-list"),B=p("van-pull-refresh");return a(),o("div",H,[t("div",M,[f(U,{title:"消息列表"})]),t("div",S,[t("div",$,[f(B,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e),class:"scroll-container",onRefresh:C},{default:k(()=>[f(b,{loading:d.value,"onUpdate:loading":s[0]||(s[0]=e=>d.value=e),finished:_.value,"finished-text":"已加载全部",onLoad:V},{default:k(()=>[t("div",j,[(a(!0),o(L,null,w(r.value,(e,P)=>(a(),o("div",{class:"list-item",key:P},[e.type==1?(a(),o("div",A,s[2]||(s[2]=[t("img",{src:I,alt:""},null,-1)]))):l("",!0),e.type==2?(a(),o("div",G,s[3]||(s[3]=[t("img",{src:T,alt:""},null,-1)]))):l("",!0),e.type==3?(a(),o("div",J,s[4]||(s[4]=[t("img",{src:R,alt:""},null,-1)]))):l("",!0),t("div",K,[t("div",null,[t("div",null,[e.type==1?(a(),o("span",O,c("审核通知"))):l("",!0),e.type==2?(a(),o("span",Q,c("消费者投诉"))):l("",!0),e.type==3?(a(),o("span",W,c("违规预警"))):l("",!0)])]),t("div",X,c(e.createTime),1)]),t("div",Y,c(e.content),1),e.images&&e.images.length?(a(),o("div",Z,[(a(!0),o(L,null,w(e.images,(F,y)=>(a(),D(h,{key:y,src:F,width:"60",height:"60",radius:"4",onClick:te=>x(e.images,y)},null,8,["src","onClick"]))),128))])):l("",!0)]))),128))])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])])}}},de=q(ee,[["__scopeId","data-v-1b15584b"]]);export{de as default};
