const c=(t,a,o,n)=>{const e=(o-t)*Math.PI/180,s=(n-a)*Math.PI/180,r=Math.sin(e/2)*Math.sin(e/2)+Math.cos(t*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))},u=t=>t<1?`${Math.round(t*1e3)}米`:`${t.toFixed(1)}公里`,M=t=>t<60?`${t}分钟`:`${Math.floor(t/60)}小时${t%60}分钟`,d=()=>new Promise((t,a)=>{if(typeof BMap>"u"){a(new Error("Baidu Maps API is not loaded"));return}new BMap.Geolocation().getCurrentPosition(function(n){this.getStatus()==BMAP_STATUS_SUCCESS?t({latitude:n.point.lat,longitude:n.point.lng}):a(new Error("定位失败："+this.getStatus()))},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),l=(t,a)=>t.map(n=>{const i=c(a.latitude,a.longitude,n.latitude,n.longitude),e=Math.round(i/4*60);return{...n,distance:u(i),duration:M(e)}});export{d as g,l as u};
