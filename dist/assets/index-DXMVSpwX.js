import{C as x}from"./CommonHeader-D5wAUnYL.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as Y,c,a as t,F as B,f as C,t as I,n as R,k as L,e as o,r as v,o as N,b as D,i as w,g as V,w as S,d as Z,s as k,u as O}from"./index-DohTaPA9.js";import{s as y}from"./request-C8QZ-v7H.js";import{u as _}from"./applyVendor-N7zd6jMs.js";const b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAAyCAYAAADrwQMBAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALfSURBVGiB7VrdedpAEJzly3soQa4guAJDBXYqMKkgpAJIBUkqgFTguALcAaQCXSqwUsHk4SQC4oQiaVdngueFTye02tHd7u3PAQYgOaceZhY6moDkVJF4gVFsXrUgOSL5bEA+JZnE5lcJkkmupBVSksPYPI9AckhyY0i8wENsrkcgueyBeIG5lt5SIjEE0HRp3QNYaCn0j/gE4EeL5zIRyYoLAby9ApgDmGpo9sLxBOCDiDjJZ3sDIImqUr9wACYD+BlPoqrSPxIAcyH5jOZ2/j/ACUnG1iIWBrEViIk3Ed6ZAdjmv8W2M4K3w17Nr0/yKwDfReSp6g8kxwBu4bdc+w/RQ0S2ZMOkhD5c/mKtmCX5lORdx4kZ0yZLJElaeXsHYCIirqsg+lWzhkEsYkE+gye+Dd3kX7sewdt14QAfq/xB/gE20PYDBqspWHYiecf6fD/NP07o+Zm2otrk1xWKzxvKCaatVK4ZaJM/mjW2n7GjD0DvANWgafNORK5KyiYA0g4yr8pOk2QKJeenGd6uAmPLjjJDy79NESMITfI/9y/o6wTjjjKnPC5aPnaUuYMm+fLW1inA2cO4dO2U5OqRDwQ0Wnvyu5r3tIZlSvvWULYK1MgHbPO3kuhfNe9pDc2ZT0rXwfC2BVzNe1pDk/xBMzGP011HmVkg3ldrWmqSvw2Mfe4o82tg7KajzB20szrNiGwrItclWUP4iFHF7rW9/X1gbILmy98BeB8Y/wjNtFYzUWBFH52+fb1WkKFa1bHI5yvbyPSnNtYVz6UkpyeerXquNazKWAsRqXR29DN7UMk5FbnRp7cLXRVhWr1V6aNT93DTAaxL12u2PEtDb+MPlsr10avL4Pfrb/sHA06Rht81ZjBuXPTZqNxVafNft3cvgfcBN9BLhWvx2qW9VLySv1RcPHmtosO5wQ2gWAc/M6yKQ4gbKFZIzgBb5OfwAJ9zL6BYE3+hcPBJ17WIZH8AXkcTrXAhyAMAAAAASUVORK5CYII=",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAOiSURBVFiFzZlPVttIEIe/apkH2XlrXhZihydvwLrBcILACQInSHIC4ASYE4ScIMwJ8JxAxnmO2VkLnr31DvvF6pqFbcax9ZdIZn47dZesz6VWVXW18Bvyu48NBxo45j1KVcEVcBfzCgHKSETbqnpv5eetV98LXvo8yQ3YG7qODf/CmHOWwLJKITDIzXQ8vva8vVGeezPD+r2hW4EPqvYTItW8kGtSHYmYZh7oTLCd7uPpSz2ZKtVRiJx5f+zeppmmwnYeBlcon4ohSyRphk+TyyQvx8L6vaFrRL+J0iiHbl0qtO3T5CgOOBLW9/tVZ2fbp4zXnq4gRI68ei1YnTBR1ubN9h2vAwrgGtFvURNrsJ2HwdUmX32URGl0HgZXa+PLF/6PwbEjRP6rV5G1Zwfv3t4sLp9hX3mdxumX9fu8DCo7Ox/5f4ECuBX4sLgwMPOqqi0/lq5JbsJpeBQSHiE0oywUPfV7QxegAjOvKvr7KTSHQuyZV/9vPQKt773hSNGLFdNZLQI3BsCqHm8GcaYIUACmNvw78oZZqsf4vb4rsrlQFQc6g/oZl2pdv/vYMEa3NubVRFAgicWBhhGRw1LIVpQG6veGriDnsT/gmPdGVUpfAllAHfQusU5Wqgah1CiQCtp9bDhoai2i4FakxESQCVTkDtIdJuBGVl0rZrPArZyAxD74xaA5tkiVZE6aB/u1z0sjt997wyAicJcOCmAUgtiHPk0uV8f+rNcuBbnYNKhCYCQBNm57EQdcFuicdmQQYjdone7jadzcKnCpoICItg2hjc7HAMacLyqeJOCyQQFU9V7mAbmfYBe7gcuiIkABQiZ7xqvXAlXaCXaug94leThORYECLa++FxgAUXudYpwbuEBQBGnBfKcQGqdFQlSYKzNwkaCojqbj8TXMYb16LZBs2SkVuFBQQMQ0FyH0Od1O4Svp3oUE4KJBgWDhVVjpG8y7hV+y/lBIeAbTALtVdaCByFWBoITKyXJ3ca3XtbGuYZqE5sH+7udfhyJ0/zDwX7OFpEL7cH/XWx2PLBGtygnZ1m8ZCuzT5ChqIhLWq9eCcDzxVBKTReFSoR0i+fqzC/l+v+q82T7fVOd7dY2um2SQ/2Nw7KBfivzSlxRg7eVytzBO2U9r/H61srPzsbDTGkCQiyl8zVok5T8Hm0Nb1eMXdnICrL0MjdPKW8nlhl2W3+u7RreOReRQVRoI1dUTRoEAYaTW/mOVlvfu7Ys/2n8BbfviaHBvN9MAAAAASUVORK5CYII=",E={class:"calendar"},P={class:"calendar-header"},X={class:"calendar-body"},H={class:"day-text"},U={key:0,src:q,alt:"",style:{width:"1rem",height:"1rem"}},K={key:1,style:{width:"1rem",height:"1rem"}},F={__name:"index",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},checkedDays:{type:Array,default:()=>[]}},setup(a){const l=a,f=["日","一","二","三","四","五","六"],m=new Date().getDate(),i=Y(()=>{const p=new Date(l.year,l.month-1,1).getDay(),n=new Date(l.year,l.month,0).getDate();console.log("当前月份:",l.month),console.log("当月天数:",n);const s=new Array(42).fill("");for(let e=0;e<n;e++)s[p+e]=e+1;return s});return(p,d)=>(o(),c("div",E,[t("div",P,[(o(),c(B,null,C(f,n=>t("div",{class:"weekday",key:n},I(n),1)),64))]),t("div",X,[(o(!0),c(B,null,C(i.value,(n,s)=>(o(),c("div",{key:s,class:R(["day",{checked:a.checkedDays.includes(n),current:n===L(m),empty:!n}])},[t("div",H,I(n||""),1),a.checkedDays.includes(n)?(o(),c("img",U)):(o(),c("div",K))],2))),128))])]))}},W=Q(F,[["__scopeId","data-v-7f6e086c"]]);function z(a){return y({url:"/stg/stallSignIn/listByMonth",method:"get",params:a})}function T(a){return y({url:"/stg/stallSignIn/openStallSignIn",method:"post",data:a})}function G(a){return y({url:"/stg/stallSignIn/closeStallSignIn",method:"post",data:a})}function M(a){return y({url:"/stg/stallSignIn/getSignInInfo",method:"get",params:a})}const j={class:"hotlist-page"},J={class:"header-fixed"},$={class:"content"},ee={class:"notice-section"},te={class:"section-header"},se={class:"notice-qd"},ae={class:"red"},ne={class:"submit-btn"},oe={key:2,class:"qiandaoClass"},le={__name:"index",setup(a){const l=O();v(null);const f=s=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="camera",e.onchange=async h=>{const u=h.target.files[0];if(!u)return;const A=new FormData;A.append("file",u);const g=await _(A);let r;s==="setup"?r=await T({openUrl:g.data.filePath}):s==="packup"&&(r=await G({closeUrl:g.data.filePath})),r.code===200?s==="setup"?(k("签到成功"),l.push({path:"/stallCheck/success",query:{type:"setup"}})):s==="packup"&&(k("签退成功"),l.push({path:"/stallCheck/success",query:{type:"packup"}})):k(r.msg)},e.click()},m=s=>{f(s)};N(()=>{p(),n()});const i=v([]),p=()=>{z().then(s=>{i.value=s.data})},d=v({}),n=()=>{M().then(s=>{d.value=s.data})};return(s,e)=>{var u,A,g;const h=Z("van-button");return o(),c("div",j,[t("div",J,[D(x)]),t("div",$,[e[7]||(e[7]=t("div",{class:"bg-box"},null,-1)),t("div",ee,[t("div",te,[e[4]||(e[4]=t("div",{class:"notice-title"},"签到日历",-1)),t("div",se,[e[2]||(e[2]=w(" 本月出摊 ")),t("span",ae,I((u=i.value)==null?void 0:u.length),1),e[3]||(e[3]=w(" 天 "))])]),D(W,{"checked-days":i.value},null,8,["checked-days"]),t("div",ne,[(A=d.value)!=null&&A.startTime?(g=d.value)!=null&&g.endTime?(o(),c("div",oe,"今日已全部签到 ")):(o(),V(h,{key:1,block:"",type:"success",onClick:e[1]||(e[1]=r=>m("packup")),style:{background:"#0cd9b5"}},{default:S(()=>e[6]||(e[6]=[t("div",{class:"flex flex-center"},[t("img",{style:{width:"1.3rem",height:"1rem"},src:b,alt:""}),t("span",{class:"button-text"},"拍照收摊")],-1)])),_:1})):(o(),V(h,{key:0,block:"",type:"primary",onClick:e[0]||(e[0]=r=>m("setup"))},{default:S(()=>e[5]||(e[5]=[t("div",{class:"flex flex-center"},[t("img",{style:{width:"1.3rem",height:"1rem"},src:b,alt:""}),t("span",{class:"button-text"},"拍照出摊")],-1)])),_:1}))])])])])}}},Ae=Q(le,[["__scopeId","data-v-2ee8e157"]]);export{Ae as default};
