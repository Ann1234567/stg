import{_ as I}from"./tzgg-CDbIhQ_z.js";import{C as N}from"./CommonHeader-D5wAUnYL.js";import{r as o,o as F,c as w,a as e,b as c,w as r,d,u as R,e as p,F as z,f as D,g as U,t as m}from"./index-DohTaPA9.js";import{g as $}from"./hotList-XVLBxVkH.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C8QZ-v7H.js";const A={class:"hotlist-page"},E={class:"header-fixed"},H={class:"content"},M={class:"notice-section"},S={class:"notice-content"},T={class:"notice-title"},q={class:"notice-info"},G={class:"notice-stats"},J={class:"date"},K={class:"view-count"},O={class:"notice-stats"},P={class:"views"},Q={class:"view-count"},W={__name:"index",setup(X){const k=R(),_=o(1),h=o(10),n=o(!1),u=o(!1),a=o(!1),v=o([]),g=o(!0),f=async()=>{try{const l={current:_.value,size:h.value},i=(await $(l)).data.records;a.value?(v.value=i,a.value=!1):v.value=[...v.value,...i],i.length<h.value&&(u.value=!0),n.value=!1}catch{n.value=!1,u.value=!0}},x=()=>{if(!a.value){if(g.value){g.value=!1,n.value=!1;return}_.value+=1,f()}},L=()=>{u.value=!1,n.value=!0,_.value=1,f()};F(()=>{f()});const C=l=>{k.push({path:`/hotList/detail/${l.newsId}`})};return(l,s)=>{const i=d("van-image"),b=d("van-cell"),V=d("van-cell-group"),y=d("van-list"),B=d("van-pull-refresh");return p(),w("div",A,[e("div",E,[c(N)]),e("div",H,[e("div",M,[s[4]||(s[4]=e("div",{class:"section-header"},[e("div",{class:"notice-icon"},[e("img",{src:I,alt:""})])],-1)),c(B,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),onRefresh:L},{default:r(()=>[c(y,{loading:n.value,"onUpdate:loading":s[0]||(s[0]=t=>n.value=t),finished:u.value,"finished-text":"没有更多了",onLoad:x},{default:r(()=>[c(V,{border:!1},{default:r(()=>[(p(!0),w(z,null,D(v.value,t=>(p(),U(b,{onClick:Y=>C(t),key:t.newsId,class:"notice-item"},{icon:r(()=>[c(i,{src:"/stg"+t.backgroundImg,width:"120",height:"80",radius:"8",class:"notice-image"},null,8,["src"])]),title:r(()=>[e("div",S,[e("div",T,m(t.title),1),e("div",q,[e("div",G,[e("span",J,[s[2]||(s[2]=e("i",{class:"time-icon"},null,-1)),e("span",K,m(t.issueTime),1)])]),e("div",O,[e("span",P,[s[3]||(s[3]=e("i",{class:"view-icon"},null,-1)),e("span",Q,m(t.browseAmount),1)])])])])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])])}}},ae=j(W,[["__scopeId","data-v-44ea8741"]]);export{ae as default};
